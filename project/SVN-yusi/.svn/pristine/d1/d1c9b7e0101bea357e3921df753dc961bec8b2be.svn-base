var successReturn=0;
//左侧导航栏切换
function changeLeftNav(){
		$(this).addClass('active').siblings().removeClass('active');
		$('.rightContent').eq($(this).index()).removeClass('hide').siblings().addClass('hide');
		if($(this).hasClass('left-item1')){
			console.log('第一页面');
		}else if($(this).hasClass('left-item2')){
			getStationList();

		}else if($(this).hasClass('left-item3')){
			initRightContent3();
		}else if($(this).hasClass('left-item4')){
			console.log('第四页面');
			getAreaList();
		}
		setLeftHeight();
}

/**测站信息管理列表**/
function getStationList(){
	var stationListNoContent=$('.rightContent2 .notContent');
	var stationList=$('.rightContent2 .right-table-body-dataBind');
	$.ajax({
		url:getStationListUrl,
		type:"get",
		data:{},
		dataType:"json",
		success:function(result){
			if(successReturn == result.status){
				var stationAjaxList=result.data;
				if(null != stationAjaxList && stationAjaxList.length == 0){
					stationListNoContent.removeClass('hide');
					stationList.addClass('hide');
				}else if(null != stationAjaxList){
					stationList.removeClass('hide');
					stationListNoContent.addClass('hide');
					stationList.render(stationAjaxList);

					$('#create').on("click",createStationModal);
					$('.rightContent2 .right-body-table').off('click').on('click','.editBox',function(){
						editStationModal(this);
					});

					setLeftHeight();
				}
			}else{
				outBoxClose(result.msg);
			}

		},
		error:function(XMLHttpRequest){
			// error_500(XMLHttpRequest.responseText);
		}
	});
}



var isFirst=true;
function editStationModal(e){
	$('#editStationForm').removeClass('hide').prev().addClass('hide');
	$('#createStation').modal('show');
	$('#createStation').on('shown.bs.modal',function(){
		//创建和修改 地图只创建一次
			if(isFirst){
	    		 Map.init(true);
	    		 isFirst=false;
	    	}


	});
	editStation($(e));

 }
//新建测站弹窗
function createStationModal(){
	$('#createStationForm').removeClass('hide').next().addClass('hide');
	$('#createStationForm input').html('');
	$('#createStationForm .errorB').html('');
	$("#createStation").modal("show");

	$('#createStation').on('shown.bs.modal',
	    function() {
	    	if(isFirst){
	    		 Map.init(true);
	    		 isFirst=false;
	    	}

	    	getTypeList();//获取测站类型
	    	getListOfArea();//获取区域
		});

		$('#createStationSave').off('click').on('click',function(){
	    		createStation();
	    })

}
//修改测站
function editStation(e){

	var stationId=e.parents('.right-table-row').first().find('.content2RowId').val();
	//调用getStationInfoDetailUrl
	$.ajax({
		url:getStationInfoDetailUrl,
		type:"get",
		data:{stationId:stationId},
		dataType:"json",
		success:function(result){
			if(successReturn == result.status){
				var stationInfo=result.data;
				if(null != stationInfo && stationInfo.length == 0){

				}else if(null != stationInfo){

					$('#editStationForm').render(stationInfo);

					getTypeList(stationInfo.station_type_id);//获取当前站测站类型
			    	getListOfArea(stationInfo.area_id);//获取当前站区域
			    	// $('#editStationForm select').attr('disabled','disabled');
			    	$('#editStationSave').off('click').on('click',function(){
			    		updateStationInfo(stationId);
			    	});

				}
			}else{
				outBoxClose(result.msg);
			}

		},
		error:function(XMLHttpRequest){
			// error_500(XMLHttpRequest.responseText);
		}
	});
}
//新建测站弹窗查询测站类型列表
function getTypeList(flag){
	$.ajax({
		url:getTypeListUrl,
		type:"get",
		data:{},
		dataType:"json",
		success:function(result){
			if(successReturn == result.status){

				result.data.unshift({
					"sta_type_id": 0,
					"type_name": "--请选择--"
				});
				var typeAjaxList=result.data;
				if(null != typeAjaxList && typeAjaxList.length == 0){

				}else if(null != typeAjaxList){

					var typeAjaxListVal={
						type_name:{
							value:function(){
								return this.sta_type_id;
							}
						}
					};
					$('#createStation-type-picker,#editStation-type-picker').render(typeAjaxList,typeAjaxListVal);
					$('#createStation-type-picker option:first,#editStation-type-picker option:first').attr('disabled',true);

					if(flag){
						$('#editStation-type-picker').selectpicker('val',flag);
						$('#editStation-type-picker').selectpicker('refresh');
					}else{
						$('#createStation-type-picker').selectpicker('val','');
						$('#createStation-type-picker').selectpicker('refresh');
					}

				}

			}else{
				outBoxClose(result.msg);
			}

		},
		error:function(XMLHttpRequest){
			// error_500(XMLHttpRequest.responseText);
		}
	});

}
//新建测站弹窗查询区域列表
function getListOfArea(flag){
	$.ajax({
		url:getListOfAreaUrl,
		type:"get",
		data:{},
		dataType:"json",
		success:function(result){
			if(successReturn == result.status){
				result.data.unshift({
					"area_id": 0,
					"area_name": "--请选择--"
				});
				var getListOfArea=result.data;
				if(null != getListOfArea && getListOfArea.length == 0){

				}else if(null != getListOfArea){
					var getListOfAreaVal={
						area_name:{
							value:function(){
								return this.area_id;
							}
						}
					};
					$('#createArea-picker,#editArea-picker').render(getListOfArea,getListOfAreaVal);
					$('#createArea-picker option:first,#editArea-picker option:first').attr('disabled',true);
					if(flag){
						$('#editArea-picker').selectpicker('val',flag);
						$('#editArea-picker').selectpicker('refresh');
					}else{
						$('#createArea-picker').selectpicker('val','');
						$('#createArea-picker').selectpicker('refresh');
					}

				}
			}else{
				outBoxClose(result.msg);
			}

		},
		error:function(XMLHttpRequest){
			// error_500(XMLHttpRequest.responseText);
		}
	});

}
/**测站信息管理-新建测站**/
function createStation(){
	//获取新建测站用户填写数据发送后后台
	$('.errorB').html('');

	// var stationType=$('#station-type-picker  option:selected').val();
	// var area=$('#area-picker  option:selected').val();

	// console.log(stationType,area);
	//表单校验
	var station_name=$('input[name="station_name"]').val();//测站名称
	var sys_code=$('input[name="sys_code"]').val();//测站名系统编码
	var stcd=$('input[name="stcd"]').val();//国家标准码
	var x=$('input[name="x"]').val();//横坐标
	var y=$('input[name="y"]').val();//纵坐标
	var station_location=$('input[name="station_location"]').val();//站址
	var type_name=$('.station-type-picker .dropdown-menu li.selected').attr('data-original-index');//测站类型
	var area_name=$('.area-picker .dropdown-menu li.selected').attr('data-original-index');//区域
	var comments=$('textarea[name="comments"]').val();//备注

	 // if(!errorInfo(station_name,sys_code,stcd,x,y,station_location,type_name,area_name,comments)){
	 // 	console.log('前端校验');
  //   }else{
		$.ajax({
			url:createStationUrl,
			type:"post",
			data:$("#createStationForm").serialize(),
			dataType:"json",
			success:function(result){
				if(successReturn == result.status){
					$('#createStation').modal('hide');
					outBoxClose('创建成功');
					getStationList();
				}else{

					errorInfoII(result.msg);//后台校验
				}
			},
			error:function(XMLHttpRequest){
				// error_500(XMLHttpRequest.responseText);
			}
		});
     // }
}
/**修改保存更新当前站信息**/
function updateStationInfo(stationId){
	var station_type_id=$('#editStation-type-picker option:selected').val();
	var area_id=$('#editArea-picker option:selected').val();
	$.ajax({
		url:updateStationInfoUrl,
		type:"post",
		data:$("#editStationForm").serialize()+"&id="+stationId+"&station_type_id="+station_type_id+"&area_id="+area_id,
		dataType:"json",
		success:function(result){
			if(successReturn == result.status){
				$('#createStation').modal('hide');
				getStationList();

			}else{
				outBoxClose(result.msg);
			}
		},
		error:function(XMLHttpRequest){
			// error_500(XMLHttpRequest.responseText);
		}
	});

}
function errorInfo(station_name,sys_code,stcd,x,y,station_location,type_name,area_name,comments){

	//测站名系统编码,国家标准码不需要做非空判断
	$('.errorB').html('');
	if($.trim(station_name)==""){
		$("#createStationForm .stationNameError").html('测站名称不能为空');
		return false;
	}

	if(sys_code.length>8){
		$("#createStationForm .sysCodeError").html('测站名系统编码不能超过8位');
		return false;
	}

	if(stcd.length>12){
		$("#createStationForm .stcdError").html('国家标准码不能超过12位');
		return false;
	}
	if($.trim(x)==""){
		$("#createStationForm .xError").html('横坐标不能为空');
		return false;
	}
	if($.trim(y)==""){
		$("#createStationForm .yError").html('纵坐标不能为空');
		return false;
	}
	if($.trim(station_location)==""){
		$("#createStationForm .stationLocationError").html('站址不能为空');
		return false;
	}
	if($.trim(type_name)=="0"){
		$("#createStationForm .stationTypeError").html('测站类型不能为空');

		return false;
	}
	if($.trim(area_name)=="0"){
		$("#createStationForm .areaError").html('区域不能为空');
		return false;
	}
	return true;

}
//后台校验
function errorInfoII(msg){
	if(msg=="横坐标不能为空"){
		$("#createStationForm .xError").html(msg);
	}
	if(msg=="纵坐标不能为空"){
		$("#createStationForm .yError").html(msg);
	}
	if(msg=="请选择测站类型"){
		$("#createStationForm .stationTypeError").html(msg);
	}
	if(msg=="请选择区域"){
		$("#createStationForm .areaError").html(msg);
	}
	if(msg=="请输入测站名称"){
		$("#createStationForm .stationNameError").html(msg);
	}
	if(msg=="请输入8位测站标准码"){
		$("#createStationForm .sysCodeError").html(msg);
	}
	if(msg=="请输入12位国家标准码"){
		$("#createStationForm .stcdError").html(msg);
	}
	if(msg=="测站名称已存在"){
		$("#createStationForm .stationNameError").html(msg);
	}
}
/* 页面3 - 初始化页面 */
function initRightContent3(){
	//1. 初始化时间
	// 结束时间
	var end = new Date();
	end = end - end%(5*60*1000);
	$("#content3Endtime").datetimepicker( 'setDate' , new Date(end));
	// 开始时间
	var start=new Date();
		start.setHours(8);
		start.setMinutes(0);
		start.setSeconds(0);
		start.setMilliseconds(0);
	if (start > new Date(end)) {
		start = new Date(start.getTime()-24*60*60*1000);
	}
	$('#content3Starttime').datetimepicker('setDate', start);
	// $('#content3Starttime').datetimepicker('setDate', new Date(1496826000000));
	//2. 开始和结束时间限制
	$("#content3Starttime,#content3Endtime").trigger("changeDate");
	//3. 获取平均降雨列表数据
	getAverageRainList();
}

/**区域平均降雨列表**/
function getAverageRainList(){
	var beginTime = $("#content3Starttime").val();
	var endTime = $("#content3Endtime").val();
	//计算[降雨历时]
	var durationTime = Date.parse(endTime) - Date.parse(beginTime);
	var h = parseInt(durationTime/(60*60*1000),10);
	var m = parseInt(durationTime%(60*60*1000)/(60*1000),10);
	m = (m<10)?"0"+m:m;
	durationTime = h+"小时"+m+"分钟";

	$.ajax({
		url: areaAverageRainfallUrl,
		type: 'post',
		data: {
			begin_time: beginTime,
			end_time: endTime
		},
		dataType: 'json',
		success: function(result){
			// 添加[降雨历时] + 保留1位小数 + 无数据填"——";
			if (result.data) {
				result.data.forEach(function(val,index){
					// if (val.average_rainfall) {
					// 	val.average_rainfall = val.average_rainfall.toFixed(1);
					// 	val.max_Rainfall = val.max_Rainfall.toFixed(1);
					// }

					if (!val.station_info_list) {
						val.average_rainfall=val.maxStation=val.max_Rainfall = "——";
					}

					val.durationTime = durationTime;
				});

				var averageRainfall = {
					maxStation: {
						"data-stationid": function(){
							return this.maxStation_id;
						}
					},
				};

				$(".rightContent3 .right-table-body-dataBind").render(result.data,averageRainfall);
				setLeftHeight();
			}
		},
		error:function(XMLHttpRequest){
			// error_500(XMLHttpRequest.responseText);
		}
	});
}

/* 页面3 - 算法管理 */
function showAverageRainfall(){
	var beginTime = $("#content3Starttime").val();
	var endTime = $("#content3Endtime").val();

	$.ajax({
		url: areaAverageRainfallUrl,
		type: 'post',
		data: {
			begin_time: beginTime,
			end_time: endTime
		},
		dataType: 'json',
		success: function(result){
			if (result.data) {
				var data = result.data;
				data.forEach(function(val,index){
					// 添加计算方法
					val.area_method = (val.algorithmType===0)?"算术平均法":"系数平均法";
					if (val.station_info_list) {
						val.station_info_list.forEach(function(subVal,index){
							// 系数平均法: 添加系数值 + 隐藏算术平均法项
							if (val.algorithmType === 1) {
								val.param_list.forEach(function(subsubVal){
									if (subsubVal.param_staId===subVal.id) {
										subVal.param_value = subsubVal.param_value;
										subVal.param_hide = "";
									}
								});
							}else {
								subVal.param_value = "";
								subVal.param_hide = "hide";
							}
						});
					}
				});
				// console.log(data);
				var algorithmManage = {
					area_name: {
						"data-areaId": function(){
							return this.area_id;
						}
					},
					station_info_list: {
						param_value: {
							class: function(){
								return this.param_hide;
							}
						},
						station_name: {
							"data-stationid": function(){
								return this.id;
							}
						}
					}
				};

				$("#averageRainfall .modal-body-content").render(result.data,algorithmManage);
				setLeftHeight();

				$("#averageRainfall").modal("show");
			}
		},
		error:function(XMLHttpRequest){
			// error_500(XMLHttpRequest.responseText);
		}
	});


}

/* 页面3 - 算法管理: 修改 */
function showAverageRainfallModify(){

	$.ajax({
		url: getAreaStationParamListUrl,
		type: 'get',
		data:{area_id: $(this).parents("ul").find("[data-bind=area_name]").data("areaid")},
		dataType: 'json',
		success: function(result){
			// console.log(result);
			if (result.status === 0) {
				var data = result.data;
				var renderData = {
					areaId: data[0].area_id,
					areaName: data[0].area_name,
					stationData: data,
					stationParam: (function(){
						/*设置系数填充信息*/
						var str=[];
						if (data[0].param) {
							data.forEach(function(val){
								str.push(val.param);
							});
							str = str.join("-");
						}
						return str;
					})(data)
				};
				var renderDataProperty = {
					areaName: {
						'data-areaId': function(){
							return this.areaId;
						}
					},
					stationData: {
						station_name: {
							'data-stationId': function(){
								return this.sta_id;
							}
						}
					}
				};
				// console.log(renderData);
				$("#averageRainfallModify form").render(renderData,renderDataProperty);

				if (data[0].hasOwnProperty("param")) {
					$("#averageRainfallModify .rainfall-right-second").trigger("click");
					$("#averageRainfallModify .rainfall-item4 .errorInfo").text("");
				}else {
					$("#averageRainfallModify .rainfall-right-first").trigger("click");
				}

				$("#averageRainfallModify").modal("show");
				//仅保留一个背景颜色
				$(".modal-backdrop").css("opacity",0);
				$(".modal-backdrop")[0].style.opacity = 0.3;
			}else {

			}
		},
		error:function(XMLHttpRequest){
			// error_500(XMLHttpRequest.responseText);
		}
	});
}

/* 页面3 - 算法管理: 修改: 切换测站 */
function averageRainfallModifyChange(){
	$(this).addClass("active").siblings().removeClass("active");
	if ($("#averageRainfallModify .rainfall-right-first").hasClass("active")) {
		$("#averageRainfallModify .rainfall-item4").addClass("hide");
	}else {
		$("#averageRainfallModify .rainfall-item4").removeClass("hide");
		$("#averageRainfallModify .rainfall-item4 .errorInfo").text("");
	}
}

/* 页面3 - 算法管理: 修改:保存 */
function averageRainfallModifySave(){
	// 验证系数之和等于1
	var stationParam = $("#averageRainfallModify [data-bind=stationParam]").val();
	var $errorBox = $("#averageRainfallModify .rainfall-item4 .errorInfo");
	// 检测是否填写了内容
	if (stationParam.length) {
		stationParam = stationParam.split("-");
		var stationNumber = $("#averageRainfallModify [data-bind=station_name]").length;
		// 检测填写的系数数量是否正确
		if (stationParam.length === stationNumber) {
			var sum = 0;
			stationParam.forEach(function(val,i){
				sum += Number(val);
			});
			if (Math.abs(sum-1) < 1e-6) {
				var param = {};  //定义传送的数据;
				var areaId = $("#averageRainfallModify [data-bind=areaName]").data("areaid");
                param.area_id = areaId;  //构建传送数据
                param.analysis_type=$("#averageRainfallModify .rainfall-right-first").hasClass("active")?0:1;  //构建传送数据

				var paramList = [];  //定义系数数组
				var station = $("#averageRainfallModify [data-bind=station_name]");
				$.each(station,function(i,val){
					var item = {};
					item.area_id = areaId;
					item.sta_id = parseInt(val.dataset.stationid,10);
					if (param.analysis_type === 0) {
						item.param = null;
					}else {
						item.param = stationParam[i];
					}
					paramList.push(item);
				});
                param.paramList = paramList;  //构建传送数据

				$.ajax({
					url: analysisManagerUrl,
					type: 'POST',
					traditional: true,
                    contentType : 'application/json;charset=utf-8',
					data: JSON.stringify(param),
					dataType: 'json',
					success: function(result){
						if (result.status === 0) {
							$("#averageRainfallModify .closeImg").trigger("click");
							$(".rightContent3 .create").trigger("click");
						}else {
							console.log(result);
						}
					},
					error: function(XMLHttpRequest){
						// error_500(XMLHttpRequest.responseText);
					}
				});

			}else{
				$errorBox.text("系数之和不等于1");
			}

		}else {
			$errorBox.text("测站个数和系数个数不相等");
		}
	}else{
		$errorBox.text("请填写系数");
	}
	$("[data-bind=stationParam]").focus(function(){$errorBox.text("")});
}

/*页面3 显示更多信息*/
function showAreaCard(e){
	var id = $(e.target).parents(".right-table-row-item").find("[data-bind=area_id]").val();
	var sentence1="",sentence2="";
	//处理sentence1
	var beginTime = $("#content3Starttime").val();
	var endTime = $("#content3Endtime").val();
	$.ajax({
		url: areaAverageRainfallUrl,
		type: 'post',
		data: {
			begin_time: beginTime,
			end_time: endTime
		},
		dataType: 'json',
		success: function(result){
			result.data.forEach(function(val,index){
				if (val.area_id == id) {
					var stationList = val.station_info_list;
					if (stationList==null) {
						sentence1 = "1. "+val.area_name+val.message.slice(3)+"；";
					}else {
						sentence1 = "1. "+val.area_name+"共包括"+stationList.length+"个雨量站：";
						stationList.forEach(function(subVal,i){
							sentence1 += subVal.station_name+"、";
						});
						sentence1 = sentence1.slice(0,-1)+"；";
					}
					$("#areaCard p:eq(0)").text(sentence1);
				}
			});

			//处理sentence2
			$.ajax({
				url: getAreaDetailInfoUrl,
				type: 'get',
				data: {areaId: id},
				success: function(result){
					if (result.status === 0){
						var data = result.data;
						var areaName = (data.algorithmType===0)?"算数平均法":"系数平均法";
						sentence2 = "2. "+data.area_name+"按照"+areaName+"计算平均雨量；";
						$("#areaCard p:eq(1)").text(sentence2);

						/*显示并处理弹窗的位置*/
						var position = $(e.target).offset();
						var left = position.left-27;
						var top = position.top+28 ;
						$("#right .areaCard").css({
							"left":left,
							"top":top
						}).removeClass("hide");
					}else {
						/*显示错误信息弹窗*/
					}
				},
				error: function(XMLHttpRequest){
					// error_500(XMLHttpRequest.responseText);
				}
			});
		},
		error: function(XMLHttpRequest){
			// error_500(XMLHttpRequest.responseText);
		}
	});
	e.stopPropagation();
}

/*页面3 - 隐藏更多信息*/
function hideAreaCard(evt){
	if($(evt.target).parents(".areaCard").length==0){
		$('.areaCard').addClass('hide');
	}
}


/*第4页 - 查询显示区域列表*/
function getAreaList(){
	$.ajax({
		url:getListOfAreaUrl,
		type:'get',
		success: function(result){
			if (result.status === 0) {
				$(".rightContent4 .right-table-body-dataBind").render(result.data);
				setLeftHeight();
			}
		},
		error: function(XMLHttpRequest){
			// error_500(XMLHttpRequest.responseText);
		}
	});
}

/* 页面4 - 新建区域&修改区域 - 显示*/
function createAndModifyArea(e){
	// 点击对象不是modify代表新建
	if ( $(this)[0].className != "modify" ) {
		$("#createField .modal-content").data("type",0).data("areaId","");  /*0:新建区域; 1:修改区域; 清空areaId*/
		$("#createField .modal-header>span").text("增补-测报数据");  //更换表头名称
		$("#createField input,#createField textarea").val("");  //清空form
		$("#createField").modal("show");
	}else {
		var id = $(e.target).parents(".right-table-row").find("[data-bind=area_id]").val();
		$("#createField .modal-content").data("type",1).data("areaId",id);  /*0:新建区域; 1:修改区域; 设置areaId*/
		$.ajax({  /*查询站信息*/
			url:getAreaDetailInfoUrl,
			type:'get',
			data:{
				areaId: id
			},
			dataType: 'json',
			success: function(result){
				if (result.status === 0) {
					$("#createField form")[0].reset();  //清空form
					$("#createField .modal-header>span").text("修改-测报数据");  //更换表头名称
					$("#createField form").render(result.data);  //form填入数据
					$("#createField").modal("show");  //显示出弹窗
				}else{
					/*显示错误信息弹窗*/
				}
			},
			error: function(XMLHttpRequest){
				// error_500(XMLHttpRequest.responseText);
			}
		});
	}
}
/* 页面4 - 新建区域&修改区域 - 保存*/
function saveAreaInfo(e){
	//判断是 新建(0) or 修改(1)
	if ($("#createField .modal-content").data("type") === 0) {
		$.ajax({
			url: createAreaUrl,
			type: 'post',
			data: $("#createField form").serialize(),
			dataType: 'json',
			success: function(result){
				if (result.status === 0) {
					$("#createField").modal("hide");
					$(".left-item4").trigger("click");
				}else{
					console.log(result.msg);
				}
			},
			error: function(XMLHttpRequest){
				// error_500(XMLHttpRequest.responseText);
			}
		});
	}else {
		$.ajax({
			url: updateAreaInfoUrl,
			type: 'post',
			data: {
				area_id: $("#createField .modal-content").data("areaId"),
				area_name: $("#createField input[name=area_name]").val(),
				comment: $("#createField textarea[name=comment]").val(),
			},
			dataType: 'json',
			success: function(result){
				if (result.status === 0) {
					$("#createField .closeImg").trigger("click");
					$(".left-item4").trigger("click");
				}
			},
			error: function(XMLHttpRequest){
				// error_500(XMLHttpRequest.responseText);
			}
		});
	}
}

/*设置页面高度*/
function setLeftHeight(){
	// 1. 先清除高度
	$("#left").height("");
	$("#right").height("");
	// 2. 获取高度,用于比较
	var heightLeft= $("#left").outerHeight(true);
	var heightRight= $("#right").outerHeight(true);
	// 3. 比较并赋值
	if (heightLeft > heightRight) {
		// 动态获取margin和padding值
		var rightMt = parseInt($("#right").css("marginTop"));
		var rightMb = parseInt($("#right").css("marginBottom"));
		var rightPt = parseInt($("#right").css("paddingTop"));
		var rightBt = parseInt($("#right").css("paddingBottom"));
		$("#right").height(heightLeft-rightMt-rightMb-rightPt-rightBt);
	}else{
		$("#left").height(heightRight);
	}
}

$(function(){
	setLeftHeight();

	$('.left-item').on("click",changeLeftNav);
	/**自动测报数据修补tabs切换**/
	$('.rightContent1 .btn-tabs button').on("click",function(){
		$(this).addClass('active').siblings().removeClass('active');
	});
	/**增补**/
	$('#augment').on("click",function(){
 		$("#augmentModal").modal("show");
	})
	/**测站信息管理**/

	$('#create').off('click').on('click',function(){
		createStationModal();
	});
	/**页面3 - 平均区域降雨**/
	/*获取区域平均降雨信息*/
	$("#rightContent3_search_btn").on("click",getAverageRainList);
	/* 显示更多信息 */
	$(".rightContent3 .right-table-body").on("click","i.introself",showAreaCard);
	/* 隐藏更多信息 */
	$(document).on("click",hideAreaCard);

	/* 算法管理 */
	$(".rightContent3 .create").on("click",showAverageRainfall);
	/* 算法管理: 修改 */
	$("#averageRainfall .modal-body-content").on("click","div.modifyson",showAverageRainfallModify);
	/* 算法管理 - 修改: 切换测站 */
	$("#averageRainfallModify .rainfall-item3 .rainfall-right>div").on("click",averageRainfallModifyChange);
	$("#averageRainfallModify .saveAverageRainfall").on("click",averageRainfallModifySave);

	/**页面4 - 区域信息管理**/
	/* 新建区域 - 显示*/
	$(".rightContent4 .create").on("click",createAndModifyArea);
	/* 修改区域 - 显示*/
	$(".rightContent4 .right-table-body").on("click",".modify",createAndModifyArea);
	/*新建区域&修改区域 - 保存*/
	$("#createField button.save").on("click",saveAreaInfo);


});
