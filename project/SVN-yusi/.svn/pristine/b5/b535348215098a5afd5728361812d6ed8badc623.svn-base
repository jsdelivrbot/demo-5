//获取当前日期
function DateToday(flag) {
  var d = new Date();
  var year = d.getFullYear();
  var month = d.getMonth() + 1;
  if (month < 10) {
    month = '0' + month;

  }
  var day = d.getDate();
  if (day < 10) {
    day = '0' + day;
  }
  var hour = d.getHours();
  if (hour < 10) {
    hour = '0' + hour;
  }  
  var min = d.getMinutes();
 if (min < 10) {
    min = '0' + min;
  }
  var str;
  if(flag=="years"){
	str = year;
	return str;
  }else if(flag=="months"){
	str = year + "-" + month ;
	return str;
  }else if(flag=="days"){
  	str = year + "-" + month + "-" + day;
  	return str;
  }

}

$(function(){
	//初始化日期控件
	$('#daysPicker').val(DateToday('days'));
    // 日统计&&月统计&&年统计
    $(".wrap-title-first>button").on("click",function(e){

        $(this).addClass("active").siblings().removeClass("active");
        if(e.target.id=="days"){
          $('.wrap-title-second').addClass('hide');//日统计不显示人工自动站
	        $('#daysPicker').val(DateToday('days'));    		
        }else if(e.target.id=="months"){
          $('.wrap-title-second').removeClass('hide');
          $('.wrap-title-second button:last-child').addClass('active').siblings().removeClass('active');
    			$('#monthsPicker').val(DateToday('months'));
        }else if(e.target.id=="years"){
          $('.wrap-title-second').removeClass('hide');
          $('.wrap-title-second button:last-child').addClass('active').siblings().removeClass('active');
 			    $('#yearsPicker').val(DateToday('years'));  
        }
        var idx=$(this).index();
        $('.pickerBox .timePicker').eq($(this).index()).removeClass('hide').siblings('.timePicker').addClass('hide');
    });
    // 人工站&&自动站
    $(".wrap-title-second>button").on("click",function(){
        $(this).addClass("active").siblings().removeClass("active");
    });

    // 导出到excel文件
    $(".wrap-title-forth>button").on("click",function(){
        ExportToExcel('#rainfallTable','Report Title',true);
        console.log("导出");
    });

});
