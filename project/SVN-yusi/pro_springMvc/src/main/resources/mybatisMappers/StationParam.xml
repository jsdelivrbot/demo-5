<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mybatisPro.myBatisDao.StationParam">
	<cache type="mybatisPro.mybatisRedis.MybatisRedisCache" />
	
	<!-- 根据测站ID查询该站的系数 -->
	<select id="getStationParamByStaId" resultType="Float">
		SELECT
		    paramTable.param
		FROM
		    rwdb.paramTable
		    INNER JOIN rwdb.ST_BS_STBPRP_B 
		        ON (paramTable.sta_id = ST_BS_STBPRP_B.id)
			WHERE
					ST_BS_STBPRP_B.id=#{staId};
	</select>
	
	<!-- 根据区域ID查询算法系数 -->
	<select id="findParamByAreaId" resultType="mybatisPro.mybatisEntity.StationParamEntity" useCache="false"> 
		select * from rwdb.paramTable 
			where paramTable.area_id=#{areaId}
	</select>
	
	<!-- 根据区域ID删除参数数据 -->
	<delete id="deleteParamByAreaId" parameterType="long">
		delete from rwdb.paramTable 
			where paramTable.area_id=#{areaId}
	</delete>
	
	<!-- 批量添加区域测站系数数据 -->
	<insert id="addParam" parameterType="list">
		insert into rwdb.paramTable(
			area_id,sta_id,param
		)values
		<foreach collection="paramList" index="index" item="item" separator=",">
			(#{item.area_id},#{item.sta_id},#{item.param})
		</foreach>
		
	</insert>
	
	<!-- 批量修改区域测站系数数据 -->
	<update id="updateParam" parameterType="list">
	<foreach collection="paramList" index="index" item="item" separator=";">
		update rwdb.paramTable set param=#{item.param} where sta_id = #{item.sta_id}
		</foreach>
	</update>
</mapper>